<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieMaxx</title>
    <script src="https://kit.fontawesome.com/57d79c9300.js" crossorigin="anonymous"></script>
    <script src="../script.js"></script>
    <link rel="stylesheet" href="../style.css">
</head>
<body>

<script>
    async function UserAction() {
        var xhr = new XMLHttpRequest(); //invoke a new instance of the XMLHttpRequest
        xhr.onload = success; // call success function if request is successful
        xhr.onerror = error;  // call error function if request failed
        xhr.open('POST', 'http://localhost:8080/kunden/'); // open a GET request
        xhr.setRequestHeader('Content-Type', 'application/json');
        let filmname = document.querySelector("#filmname").value;
        let kinosaal = document.querySelector("#kinosaal").value;
        let startuhrzeit = document.querySelector("#startuhrzeit").value;
        let laenge = document.querySelector("#laenge").value;
        xhr.send(JSON.stringify({
            filmname:filmname,
            kinosaal:kinosaal,
            startuhrzeit:startuhrzeit,
            laenge:laenge,
        })); // send the request to the server.

        //E-Mail wird in sessionstorage gespeichert
        sessionStorage.setItem('s_email', email);
        alert(sessionStorage.getItem('s_email'))
    }


    function success() {
        var data = JSON.parse(this.responseText.toString()); //parse the string to JSON
        console.log(data);
        alert(data);
    }

    // function to handle error
    function error(err) {
        alert('Request Failed');
    }

    function abort() {
        sessionStorage.clear();
    }

</script>

<header>
    <img onclick="abbruchStartseite(), abort()" class="logo" src="https://cdn.glitch.com/d439d6d0-1bac-45dc-89dc-45037a7528cf%2Fmoviemaxx%20(2).png?v=1632756198801" alt="logo">

    <button onclick="abbruchStartseite(), abort()" >Startseite</button>
</header> <!-- end header -->

<div class="wrapper">
    <h2>
        Lege eine Vorstellung an
    </h2>

    <daten>
        <div class="registrierung">
            <div class="content">
                <form action="../ticketbuchung/bezahlen.html">
                    <div class="user-details">
                        <div class="input-box">
                            <span class="details">Filmname</span>
                            <input type="text" id="filmname" placeholder="Gebe den Filmnamen ein" required>
                        </div>
                        <div class="input-box">
                            <span class="details">Kinosaal</span>
                            <input type="number" min="0" id="kinosaal" placeholder="Gebe die Nummer des Kinosaals ein" required>
                        </div>
                        <div class="input-box">
                            <span class="details">Startuhrzeit</span>
                            <input type="time" id="startuhrzeit" placeholder="Gebe die Startuhrzeit ein" required>
                        </div>
                        <div class="input-box">
                            <span class="details">Länge der Vorstellung (in Minuten)</span>
                            <input type="number" id="laenge" min="0" placeholder="Gebe die Länge der Vorstellung ein" required>
                        </div>
                    </div>
                    <div class= "button" >
                        <a href="#"><input type="submit" value="Bestätigen" onclick="UserAction()"></a>
                    </div>
                    </p>
                </form>
            </div>
        </div>
    </daten>

    <p>

    </p>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="footer-col">
                <h4>Informationen</h4>
                <ul>
                    <li><a href="../subpages/preise.html">Eintrittspreise</a></li>
                    <li><a href="../subpages/contact.html">Anfahrt & Öffnungszeiten</a></li>
                    <li><a href="../footarea/Covid.html">Covid-19-Infos</a></li>
                    <li><a href="../footarea/gutscheine.html">Gutscheine</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Kontakt</h4>
                <ul>
                    <li><a href="../footarea/faq.html">FAQ</a></li>
                    <li><a href="../subpages/contact.html">Kontakt</a></li>
                    <li><a href="../footarea/newsletter.html">Newsletter</a></li>
                    <li><a href="../footarea/karriere.html">Karriere</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Rechtliches</h4>
                <ul>
                    <li><a href="../footarea/impressum.html">Impressum</a></li>
                    <li><a href="../footarea/datenschutz.html">Datenschutz</a></li>
                    <li><a href="../footarea/agb.html">AGB</a></li>
                    <li><a href="../footarea/hausordnung.html">Hausordnung</a></li>
                </ul>
            </div>
            <div class="footer-col">
                <h4>Folge Uns Auf</h4>
                <div class="social-links">
                    <div class="facebook"><div class="tooltip"><a href="https://de-de.facebook.com/facebook/"><i class="fab fa-facebook-f"></i></a><span class="tooltiptext">Facebook</span></div></div>
                    <div class="twitter"><div class="tooltip"><a href="https://twitter.com/home?lang=de"><i class="fab fa-twitter"></i></a><span class="tooltiptext">Twitter</span></div></div>
                    <div class="instagram"><div class="tooltip"><a href="https://www.instagram.com/"><i class="fab fa-instagram"></i></a><span class="tooltiptext">Instagram</span></div></div>
                    <div class="youtube"><div class="tooltip"><a href="https://youtube.com/"><i class="fab fa-youtube"></i></a><span class="tooltiptext">YouTube</span></div></div>
                </div>
            </div>
        </div>
    </div>
</footer>

</body>
</html>