<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieMaxx</title>
    <script src="https://kit.fontawesome.com/57d79c9300.js" crossorigin="anonymous"></script>
    <script src="../script.js"></script>
    <link rel="stylesheet" href="../style.css">
</head>
<body>

<script>
    async function UserAction() {
        var xhr = new XMLHttpRequest(); //invoke a new instance of the XMLHttpRequest
        xhr.onload = success; // call success function if request is successful
        xhr.onerror = error;  // call error function if request failed
        xhr.open('POST', 'http://localhost:8080/kunden/login'); // open a POST request
        xhr.setRequestHeader('Content-Type', 'application/json');
        let email = document.querySelector("#email").value; //email statt usernamen
        let passwort = document.querySelector("#passwort").value;

        xhr.send(JSON.stringify({
            email:email,
            passwort:passwort,
        })); // send the request to the server.

        //E-Mail wird in sessionstorage gespeichert
        sessionStorage.setItem('s_email', email);
    }

    function success() {
        var data = JSON.parse(this.responseText.toString()); //parse the string to JSON
        if (data == false) {
            document.getElementById('FehlermeldungLogin').innerHTML = "Ihre Login-Daten sind falsch!";
            //sessionStorage.setItem('s_email', email);
        }
        console.log(data);
        alert(data);
    }

    // function to handle error
    function error(err) {
        alert('Request Failed');
    }

    function abort() {
        sessionStorage.clear();
    }

</script>

<header>
    <img onclick="abbruchStartseite(), abort()" class="logo" src="https://cdn.glitch.com/d439d6d0-1bac-45dc-89dc-45037a7528cf%2Fmoviemaxx%20(2).png?v=1632756198801" alt="logo">

    <button onclick="abbruchStartseite(), abort()" >Startseite</button>
</header> <!-- end header -->

<div class="wrapper">
  <h2>
    Login
  </h2>
 
<daten>
  <div class="registrierung">
    <div class="content">
      <form action="../ticketbuchung/bezahlen.html">
        <div class="user-details">
          <div class="input-box">
            <span class="details">E-Mail</span>
            <input type="text" id="email" placeholder="Gebe deine E-Mail-Adresse ein" required>
          </div>
          <div class="input-box">
            <span class="details">Passwort</span>
            <input type="password" id="passwort" placeholder="Gebe dein Passwort ein" required>
          </div>
          <p style="font-style:italic; font-size:10px; text-align:center">
            <a href="../ticketbuchung/passwort.html">Passwort vergessen?</a>
            <p id="FehlermeldungLogin" ></p>
        </div>
        <div class="button">
          <a href="../ticketbuchung/bezahlen.html"><input type="submit" value="Bestätigen"></a>
      </form>
    </div>
        </div>
        <p style="font-style:italic; font-size:10px; text-align:center">
          <a href="../ticketbuchung/registrierung.html">Du hast noch kein Konto?  Klicke hier zum Registrieren</a>
        </p>
      </div>
    </daten>
  <p>

  </p>
</div>

<footer class="footer">
    <div class="container" style="text-align: center;">
        <p><br /></p>
        <img src="https://cdn.glitch.com/d439d6d0-1bac-45dc-89dc-45037a7528cf%2FMail-Logo.png?v=1632767682319" alt="logo" height="150px">
        <p style="text-align: center; font-size: 10px;">© MovieMaxx. All rights reserved.</p>
    </div>
</footer>
  
  </body>
</html>