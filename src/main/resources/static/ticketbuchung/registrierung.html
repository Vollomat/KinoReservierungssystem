<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MovieMaxx</title>
    <script src="https://kit.fontawesome.com/57d79c9300.js" crossorigin="anonymous"></script>
    <script src="../script.js"></script>
    <link rel="stylesheet" href="../style.css">
</head>
<body>

    <script>
        async function UserAction() {
            var xhr = new XMLHttpRequest(); //invoke a new instance of the XMLHttpRequest
        xhr.onload = success; // call success function if request is successful
        xhr.onerror = error;  // call error function if request failed
        xhr.open('POST', 'http://localhost:8080/kunden/register/'); // open a GET request
        xhr.setRequestHeader('Content-Type', 'application/json');
        let vorname = document.querySelector("#vorname").value;
        let nachname = document.querySelector("#nachname").value;
        let email = document.querySelector("#email").value;
        let alterInJahren = document.querySelector("#alter").value;
        let strasse = document.querySelector("#strasse").value;
        let hausnummer = document.querySelector("#hausnummer").value;
        let plz = document.querySelector("#plz").value;
        let ort = document.querySelector("#ort").value;
        let passwort = document.querySelector("#passwort").value;
        xhr.send(JSON.stringify({
            vorname:vorname,
            nachname:nachname,
            email:email,
            alterInJahren:alterInJahren,
            strasse:strasse,
            hausnummer:hausnummer,
            postleitzahl:plz,
            ort:ort,
            passwort:passwort
        })); // send the request to the server.

            //E-Mail wird in sessionstorage gespeichert
            sessionStorage.setItem('s_email', email);
            alert(sessionStorage.getItem('s_email'))
        }


        function success() {
            var data = JSON.parse(this.responseText.toString()); //parse the string to JSON
            console.log(data);
            alert(data);
        }

        // function to handle error
        function error(err) {
            alert('Request Failed');
        }

        function abort() {
            sessionStorage.clear();
        }

    </script>

<header>
    <img onclick="abbruchStartseite(), abort()" class="logo" src="https://cdn.glitch.com/d439d6d0-1bac-45dc-89dc-45037a7528cf%2Fmoviemaxx%20(2).png?v=1632756198801" alt="logo">

    <button onclick="abbruchStartseite(), abort()" >Startseite</button>
</header> <!-- end header -->

<div class="wrapper">
  <h2>
    Registrierung
  </h2>
  
<daten>
  <div class="registrierung">
    <div class="content">
      <div class="form">
        <div class="user-details">
          <div class="input-box">
            <span class="details">Vorname</span>
            <input type="text" id="vorname" placeholder="Gebe deinen Vornamen ein" required>
          </div>
          <div class="input-box">
            <span class="details">Nachname</span>
            <input type="text" id="nachname" placeholder="Gebe deinen Nachnamen ein" required>
          </div>
          <div class="input-box">
            <span class="details">E-Mail</span>
            <input type="email" id="email" placeholder="Gebe deine E-Mail-Adresse ein" required>
          </div>
          <div class="input-box">
            <span class="details">Alter</span>
            <input type="number" id="alter" min="0" placeholder="Gebe dein Alter ein" required>
          </div>
          <div class="input-box">
            <span class="details">Straße</span>
            <input type="text" id="strasse" placeholder="Gebe deine Straße ein" required>
          </div>
          <div class="input-box">
            <span class="details">Hausnummer</span>
            <input type="text" id="hausnummer" placeholder="Gebe deine Hausnummer ein" required>
          </div>
          <div class="input-box">
            <span class="details">Postleitzahl</span>
            <input type="text" id="plz" placeholder="Gebe deine Postleitzahl ein" required>
          </div>
          <div class="input-box">
            <span class="details">Ort</span>
            <input type="text" id="ort" placeholder="Gebe deinen Wohnort ein" required>
          </div>
          <div class="input-box">
            <span class="details">Passwort</span>
            <input type="password" id="passwort" placeholder="Wähle ein Passwort" required>
          </div>
          <div class="input-box">
            <span class="details">Passwort wiederholen</span>
            <input type="password" id="passwort2" placeholder="Wähle ein Passwort" required>
          </div>
        </div>
        <div class="gender-details">
          <input type="radio" name="gender" id="dot-1">
          <input type="radio" name="gender" id="dot-2">
          <input type="radio" name="gender" id="dot-3">
          <span class="gender-title">Geschlecht</span>
          <div class="category">
            <label for="dot-1">
            <span class="dot one"></span>
            <span class="gender">Männlich</span>
          </label>
          <label for="dot-2">
            <span class="dot two"></span>
            <span class="gender">Weiblich</span>
          </label>
          <label for="dot-3">
            <span class="dot three"></span>
            <span class="gender">divers</span>
            </label>
          </div>
        </div>
          <div class= "button" >
              <input type="submit" value="Bestätigen" onclick="UserAction(), passwortGleich()">
          </div>
        <p style="font-style:italic; font-size:10px; text-align:center">
            <a href="../ticketbuchung/login.html">Du hast schon ein Konto?  Klicke hier zum Einloggen</a> <br /> <br />
            <a href="../ticketbuchung/gast.html">Weiter als Gast</a>
        </p>
      </div>
    </div>
  </div>
</daten>
  
  <p>
    
  </p>
</div>

<footer class="footer">
    <div class="container" style="text-align: center;">
        <p><br /></p>
        <img src="https://cdn.glitch.com/d439d6d0-1bac-45dc-89dc-45037a7528cf%2FMail-Logo.png?v=1632767682319" alt="logo" height="150px">
        <p style="text-align: center; font-size: 10px;">© MovieMaxx. All rights reserved.</p>
    </div>
</footer>
  
  </body>
</html>